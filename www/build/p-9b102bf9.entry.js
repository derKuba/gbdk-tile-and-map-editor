import{r as i,h as t,H as s}from"./p-c3c108e6.js";import"./p-83f217d4.js";import{P as e,T as o}from"./p-eac2a0fb.js";const n=[{y:-1,x:0},{y:0,x:-1},{y:0,x:1},{y:1,x:0}],r=(i,t,s,e)=>{const o=((i,t,s)=>{const e=[];return n.map(o=>{const n=t.y+o.y,r=t.x+o.x;n<0||r<0||n>=i.length||r>=i[n].length||i[n][r]===s&&e.push({y:n,x:r})}),e})(i,t,s);if(0===o.length){const{y:s,x:o}=t;return i[s][o]=e,i}return o.map(t=>{const{y:o,x:n}=t;i[o][n]=e,i=r(i,t,s,e)}),i},l=class{constructor(t){i(this,t),this.isMoving=!1,this.clickMatrixTile=i=>{if(this.paintModus===e.BRUSH)this.matrix[this.indexTileMatrix][i.y][i.x]=this.choosenColour;else if(this.paintModus===e.BUCKET){if(this.matrix[this.indexTileMatrix][i.y][i.x]===this.choosenColour)return;this.matrix[this.indexTileMatrix]=r(this.matrix[this.indexTileMatrix],i,this.matrix[this.indexTileMatrix][i.y][i.x],this.choosenColour)}this.matrix=[...this.matrix],this.setMatrix(this.matrix)},this.mouseUp=()=>{this.isMoving=!1},this.mouseDown=()=>{this.isMoving=!0},this.mouseMove=i=>{if(this.isMoving&&this.paintModus===e.BRUSH)try{const t=JSON.parse(i.target.dataset.pos);this.clickMatrixTile(t)}catch(t){console.log(t)}}}render(){const i=this.matrix[this.indexTileMatrix].map((i,s)=>t("div",{class:"matrixRow",key:"tile_at_"+s},i.map((i,e)=>t("mvjp-canvas-matrix-tile",{key:`tile_at_${s}_${e}`,position:{y:s,x:e},handleClick:this.clickMatrixTile,colour:i,showGrid:this.settings.isGridVisible},this.settings.isFieldNumberVisible?t("span",null,`${s}_${e}`):null))));return t(s,null,t("div",{class:"canvas-matrix-field",onMouseMove:this.mouseMove,onMouseDown:this.mouseDown,onMouseUp:this.mouseUp},i))}};var a;o.injectProps(l,["choosenColour","matrix","setMatrix","indexTileMatrix","paintModus","settings"]),l.style=":host{display:block}.canvas-matrix-field-old{display:grid;grid-template-columns:repeat(8, 62px);grid-gap:0px;border:1px solid black;border-bottom:0;width:495px}.canvas-matrix-field{display:-ms-flexbox;display:flex;border:1px solid black;-ms-flex-direction:column;flex-direction:column}.matrixRow{display:-ms-inline-flexbox;display:inline-flex}.matrixRow span{font-size:12px;margin-left:3px}",function(i){i.WHITE="white",i.GREY="grey",i.GREY_DARK="grey-dark",i.BLACK="black"}(a||(a={}));const c=class{constructor(t){i(this,t),this.colors=["white","grey","grey-dark","black"],this.clickTile=i=>{this.choosenColour=this.colors.indexOf(i),this.updateColor(this.choosenColour)}}render(){return t(s,null,t("div",{class:"color-chooser"},t("mvjp-color-chooser-field",{color:a.WHITE,isActive:this.colors[this.choosenColour]===a.WHITE,clickTile:this.clickTile}),t("mvjp-color-chooser-field",{color:a.GREY,isActive:this.colors[this.choosenColour]===a.GREY,clickTile:this.clickTile}),t("mvjp-color-chooser-field",{color:a.GREY_DARK,isActive:this.colors[this.choosenColour]===a.GREY_DARK,clickTile:this.clickTile}),t("mvjp-color-chooser-field",{color:a.BLACK,isActive:this.colors[this.choosenColour]===a.BLACK,clickTile:this.clickTile})))}};var h;o.injectProps(c,["choosenColour","updateColor"]),c.style=".color-chooser{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;margin-bottom:15px}",function(i){i[i.COPY=0]="COPY",i[i.PASTE=1]="PASTE"}(h||(h={}));const p=class{constructor(t){i(this,t),this.copyOrPaste=i=>{i===h.COPY&&this.setCopyIndex(),i===h.PASTE&&this.pasteMatrix()}}render(){return t(s,null,t("div",{class:"box icon-alignment"},t("img",{class:"cp-icon",onClick:()=>this.copyOrPaste(h.COPY),src:"./assets/icon/freepik_document.png",alt:"arrow turn around icon",title:"Copy Matrix"})),t("div",{class:"box icon-alignment"},t("img",{class:"cp-icon",onClick:()=>this.copyOrPaste(h.PASTE),src:"./assets/icon/freepik_clipboard.png",alt:"arrow trash icon",title:"Paste"})))}};o.injectProps(p,["setCopyIndex","pasteMatrix"]),p.style=":host{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;width:160px;margin-left:50px;margin-top:17px}.box{border:1px solid black;border-radius:5px;background-color:grey;padding:5px  5px 1px 5px;margin-left:11px}.cp-icon{width:20px;height:20px}.box:last-of-type{margin:0 26px 0 0}";const d=class{constructor(t){i(this,t),this.openMenu=()=>{this.setIsModalOpen(!0)}}render(){return t(s,null,t("button",{class:"export-button",onClick:this.openMenu},"Export"))}};var x;o.injectProps(d,["setIsModalOpen"]),d.style=":host{display:block}.export-button{background-color:#4CAF50;border:none;color:white;padding:15px 32px;text-align:center;text-decoration:none;display:inline-block;font-size:16px}",function(i){i[i.SELECTOR=0]="SELECTOR",i[i.CODE_OUTPUT=1]="CODE_OUTPUT"}(x||(x={}));const m=class{constructor(t){i(this,t),this.activeIndex=x.SELECTOR,this.selectedFields=[],this.setIndex=i=>{this.activeIndex=i},this.handleTileClick=i=>{this.selectedFields[i]=this.selectedFields[i]===i?void 0:i,this.selectedFields=[...this.selectedFields]}}render(){const i=this.selectedFields.filter(i=>void 0!==i).map(i=>this.matrix[i]);return this.activeIndex===x.SELECTOR?t("mvjp-export-field-selector",{navigateTo:()=>this.setIndex(x.CODE_OUTPUT),handleTileClick:this.handleTileClick,selectedFields:this.selectedFields,matrix:this.matrix}):this.activeIndex===x.CODE_OUTPUT?t("mvjp-export-code-output",{navigateTo:()=>this.setIndex(x.SELECTOR),fields:i}):void 0}};o.injectProps(m,["matrix"]),m.style=":host{display:block}";const g=class{constructor(t){i(this,t),this.closeModal=()=>{this.setIsModalOpen(!1)}}render(){return this.isModalOpen?t(s,null,t("div",{id:"myModal",class:"modal"},t("div",{class:"modal-content"},t("div",{class:"close"},t("button",{onClick:this.closeModal}," Ã— ")),t("slot",null)))):null}};o.injectProps(g,["setIsModalOpen","isModalOpen"]),g.style=":host{display:block}.modal{position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgb(0,0,0);background-color:rgba(0,0,0,0.4)}.modal-content{background-color:#fefefe;margin:15% auto;padding:20px;border:1px solid #888;width:80%}.close{color:#aaa;font-size:28px;font-weight:bold;text-align:right}.close button{all:unset}.close:hover,.close:focus{color:black;text-decoration:none;cursor:pointer}";const u=class{constructor(t){i(this,t),this.paintModus=e.BRUSH,this.changeModus=i=>{this.paintModus=i,this.setPaintModus(i)}}render(){return t("div",{class:"paint-checkbox"},t("label",null,t("input",{type:"radio",name:"brush",value:e.BRUSH,checked:this.paintModus===e.BRUSH,onClick:()=>this.changeModus(e.BRUSH)}),t("img",{class:"icon",src:"./assets/icon/freepik_paintbrush.png",alt:"brush icon"})),t("label",null,t("input",{type:"radio",name:"bucket",value:e.BUCKET,checked:this.paintModus===e.BUCKET,onClick:()=>this.changeModus(e.BUCKET)}),t("img",{class:"icon",src:"./assets/icon/freepik_paint_bucket.png",alt:"bucket icon"})))}};o.injectProps(u,["setPaintModus"]),u.style=".paint-checkbox{display:-ms-flexbox;display:flex;margin-left:20px}.paint-checkbox label{margin-bottom:10px;margin-right:10px}.paint-checkbox [type=radio]{position:absolute;opacity:0;width:0;height:0}.paint-checkbox [type=radio]+img{cursor:pointer}.paint-checkbox [type=radio]:checked+img{outline:2px solid #33ccff}.paint-checkbox .icon{width:40px;height:40px}";const b=i=>{const t=i[0];return i.splice(0,1),i.push(t),i},f=i=>{const t=i[i.length-1];return i.pop(),i.unshift(t),i};var k,v;!function(i){i[i.UP=0]="UP",i[i.DOWN=1]="DOWN",i[i.LEFT=2]="LEFT",i[i.RIGHT=3]="RIGHT"}(k||(k={})),function(i){i[i.VERTICALLY=0]="VERTICALLY",i[i.HORIZONTALLY=1]="HORIZONTALLY"}(v||(v={}));const y=class{constructor(t){i(this,t),this.moveField=i=>{switch(i){case k.UP:b(this.matrix[this.indexTileMatrix]);break;case k.DOWN:f(this.matrix[this.indexTileMatrix]);break;case k.LEFT:this.matrix[this.indexTileMatrix].forEach(i=>{i=b(i)});break;case k.RIGHT:(()=>{this.matrix[this.indexTileMatrix].forEach(i=>{i=f(i)})})()}this.matrix=[...this.matrix],this.setMatrix(this.matrix)},this.rotateField=()=>{this.matrix[this.indexTileMatrix]=(i=>i[0].map((t,s)=>i.map(i=>i[s])))(this.matrix[this.indexTileMatrix]).reverse(),this.matrix=[...this.matrix],this.setMatrix(this.matrix)},this.clearField=()=>{var i;this.matrix[this.indexTileMatrix]=(i=this.settings.fieldHeight,Array.from({length:this.settings.fieldWidth},()=>Array.from({length:i},()=>0))),this.matrix=[...this.matrix],this.setMatrix(this.matrix)},this.flipField=i=>{switch(i){case v.VERTICALLY:(i=>{for(let t=0;t<i.length;t++)for(let s=0;s<i[0].length/2;s++){let e=i[t][i[0].length-s-1];i[t][i[0].length-s-1]=i[t][s],i[t][s]=e}})(this.matrix[this.indexTileMatrix]);break;case v.HORIZONTALLY:(i=>{let t=[];for(let s=0;s<i.length/2;s++)t=i[i.length-s-1],i[i.length-s-1]=i[s],i[s]=t})(this.matrix[this.indexTileMatrix])}this.matrix=[...this.matrix],this.setMatrix(this.matrix)}}render(){return t(s,null,t("div",{class:"line"},t("div",{class:"box icon-alignment"},t("img",{class:"paint-setting-icon",onClick:()=>this.flipField(v.HORIZONTALLY),src:"./assets/icon/freepik_h_flip.png",alt:"horizontal flip icon",title:"Flip Matrix horizontally"})),t("div",{class:"v-pad icon-alignment"},t("img",{class:"arrow up",onClick:()=>this.moveField(k.UP),src:"./assets/icon/freepik_play.png",alt:"arrow up icon",title:"Move whole Matrix up"})),t("div",{class:"box icon-alignment"},t("img",{class:"paint-setting-icon",onClick:()=>this.flipField(v.VERTICALLY),src:"./assets/icon/freepik_v_flip.png",alt:"flip vertically icon",title:"Flip Matrix vertically"}))),t("div",{class:"line"},t("div",{class:"h-pad icon-alignment"},t("img",{class:"arrow left",onClick:()=>this.moveField(k.LEFT),src:"./assets/icon/freepik_play.png",alt:"arrow left icon",title:"Move whole Matrix left"})),t("div",{class:"center"}),t("div",{class:"h-pad icon-alignment"},t("img",{class:"arrow right",onClick:()=>this.moveField(k.RIGHT),src:"./assets/icon/freepik_play.png",alt:"arrow right icon",title:"Move whole Matrix right"}))),t("div",{class:"line"},t("div",{class:"box icon-alignment"},t("img",{class:"paint-setting-icon",onClick:()=>this.rotateField(),src:"./assets/icon/freepik_reload.png",alt:"arrow turn around icon",title:"Turn matrix counter clockwise"})),t("div",{class:"v-pad icon-alignment"},t("img",{class:"arrow down",onClick:()=>this.moveField(k.DOWN),src:"./assets/icon/freepik_play.png",alt:"arrow down icon",title:"Move whole Matrix down"})),t("div",{class:"box icon-alignment"},t("img",{class:"paint-setting-icon",onClick:()=>this.clearField(),src:"./assets/icon/freepik_trash.png",alt:"arrow trash icon",title:"Empty Matrix"}))))}};o.injectProps(y,["matrix","setMatrix","indexTileMatrix","settings"]),y.style=":host{display:block;width:146px;height:156px;margin-left:50px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.line{display:-ms-flexbox;display:flex}.icon-alignment{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.icon-alignment img{border-radius:10px;background:#4CAF50;padding:4px;border:1px solid black}.icon-alignment img.arrow{background:white}.icon-alignment img:hover{background-color:#63e668}.icon-alignment img.arrow:hover{background-color:#c0c0c0}.box{width:55px;height:60px}.v-pad{width:36px;height:60px}.center{width:36px;height:36px}.h-pad{width:55px;height:36px}.paint-setting-icon{width:25px;height:25px}.arrow{width:32px;height:32px}.up{margin-top:20px;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.down{margin-bottom:20px;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.left{margin-left:20px;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.right{margin-right:20px}";const w=class{constructor(t){i(this,t)}render(){let i=[];for(let s=0;s<4;s++)for(let e=0;e<4;e++)i.push(t("mvjp-preview",{size:"s",standalone:!0}));return t(s,null,i)}};w.style=":host{display:-ms-flexbox;display:flex;width:160px;-ms-flex-wrap:wrap;flex-wrap:wrap;border:1px solid;margin-top:25px;margin-left:50px;padding-top:8px}";const _=class{constructor(t){i(this,t),this.isContentVisible=!1,this.toggleVisibility=()=>{this.isContentVisible=!this.isContentVisible}}handleChange(i){switch(i.target.name){case"width":this.settings.fieldWidth=parseInt(i.target.value,10);break;case"height":this.settings.fieldHeight=parseInt(i.target.value,10);break;case"spriteAmount":this.settings.spriteAmount=parseInt(i.target.value,10);break;case"grid":this.settings.isGridVisible=i.target.checked;break;case"numbers":this.settings.isFieldNumberVisible=i.target.checked}this.setSettings(this.settings)}render(){const i=this.isContentVisible?"visible":"";return t(s,null,t("img",{class:"settingsIcon",onClick:()=>this.toggleVisibility(),src:"./assets/icon/freepik_repair.png",alt:"settings icon"}),t("div",{class:"settingsForm "+i},t("h2",null,"Settings"),t("div",{class:"formLine"},t("label",null,"Width:",t("input",{name:"width",type:"number",min:"1",max:"99",value:this.settings.fieldWidth,onInput:i=>this.handleChange(i)})),t("span",null," x "),t("label",null,"Height:",t("input",{name:"height",type:"number",min:"1",max:"99",onInput:i=>this.handleChange(i),value:this.settings.fieldHeight}))),t("div",{class:"formLine"},t("label",null,"Number of Tiles:",t("input",{name:"spriteAmount",type:"number",min:"1",max:"99",onInput:i=>this.handleChange(i),value:this.settings.spriteAmount}))),t("div",{class:"formLine"},t("label",null,"Grid:",t("input",{name:"grid",type:"checkbox",value:"isGridVisible",onInput:i=>this.handleChange(i),checked:this.settings.isGridVisible})),t("label",null,"Numbers:",t("input",{name:"numbers",type:"checkbox",value:"isFieldNumberVisible",onInput:i=>this.handleChange(i),checked:this.settings.isFieldNumberVisible})))))}};o.injectProps(_,["settings","setSettings"]),_.style=':host{display:block;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.settingsIcon{width:30px;height:30px;margin-left:auto}.formLine{margin-bottom:15px}.settingsForm{border:1px solid #c0c0c0;padding:0 20px 0 20px;margin-bottom:25px;display:none;text-align:center;width:450px;margin:0 auto;margin-bottom:45px}.settingsForm input[type="number"]{width:50px;text-align:center;margin-left:10px}.settingsForm span{margin:0 30px 0 30px}.settingsForm.visible{display:block}';const C=class{constructor(t){i(this,t),this.onClick=i=>{this.changeTileMatrix(i)}}render(){const{spriteAmount:i}=this.settings,e=new Array(i).fill(0,0,i).map((i,s)=>t("mvjp-sprite-number-switcher-tile",{index:s,isActive:this.indexTileMatrix===s,clickTile:this.onClick,key:"index_"+s}));return t(s,null,e)}};o.injectProps(C,["settings","changeTileMatrix","indexTileMatrix"]),C.style=":host{display:-ms-flexbox;display:flex;margin-left:-100px}";export{l as mvjp_canvas_matrix,c as mvjp_color_chooser,p as mvjp_cp_panel,d as mvjp_export_button,m as mvjp_export_modal_content,g as mvjp_modal,u as mvjp_paint_modus_switcher,y as mvjp_position_setting,w as mvjp_preview_wall,_ as mvjp_settings_ui,C as mvjp_sprite_number_switcher}