import{r as t,h as s,g as e,c as i}from"./p-c3c108e6.js";import"./p-83f217d4.js";import{A as o}from"./p-5fd4d6b2.js";import{m as n,a as r,s as h,b as a,c,d as l,h as u,e as p,f as d,g as f,l as g}from"./p-1728ead7.js";import{P as m,T as b}from"./p-eac2a0fb.js";import{s as y,a as w,b as P,g as x,i as k,c as v}from"./p-2bd4c60e.js";const O=class{constructor(s){t(this,s),this.indexTileMatrix=0,this.matrix=[],this.choosenColour=2,this.isModalOpen=!1,this.copyIndex=0,this.paintModus=m.BRUSH,this.settings={fieldHeight:8,fieldWidth:8,spriteAmount:12,isGridVisible:!0,isFieldNumberVisible:!1},this.updateColor=t=>{this.choosenColour=t},this.changeTileMatrix=t=>{this.indexTileMatrix=t},this.setSettings=({fieldHeight:t,fieldWidth:s,spriteAmount:e,isGridVisible:i,isFieldNumberVisible:o})=>{this.settings={fieldHeight:t,fieldWidth:s,spriteAmount:e,isGridVisible:i,isFieldNumberVisible:o},this.matrix=this.createMatrixField(e,t,s)},this.setMatrix=t=>{this.matrix=t},this.setPaintModus=t=>{this.paintModus=t},this.createMatrixField=(t,s,e)=>{const i=[];for(let o=0;o<t;o++)i.push(Array.from({length:s},()=>Array.from({length:e},()=>0)));return i},this.setIsModalOpen=t=>{this.isModalOpen=t},this.pasteMatrix=()=>{this.matrix[this.indexTileMatrix]=this.matrix[this.copyIndex],this.matrix=[...this.matrix]},this.setCopyIndex=()=>{this.copyIndex=this.indexTileMatrix}}componentWillLoad(){const{spriteAmount:t,fieldHeight:s,fieldWidth:e}=this.settings;this.matrix=this.createMatrixField(t,s,e)}render(){const t={matrix:this.matrix,indexTileMatrix:this.indexTileMatrix,choosenColour:this.choosenColour,updateColor:this.updateColor,changeTileMatrix:this.changeTileMatrix,setSettings:this.setSettings,settings:this.settings,setMatrix:this.setMatrix,paintModus:this.paintModus,setPaintModus:this.setPaintModus,isModalOpen:this.isModalOpen,setIsModalOpen:this.setIsModalOpen,copyIndex:this.copyIndex,setCopyIndex:this.setCopyIndex,pasteMatrix:this.pasteMatrix};return s("div",null,s("header",{class:"gb-purple"},s("h1",null,"GB Sprite Tile Creator")),s("main",null,s(b.Provider,{state:t},s("stencil-router",null,s("stencil-route-switch",{scrollTopOffset:0},s("stencil-route",{url:"/",component:"app-home",exact:!0}),s("stencil-route",{url:"/docs",component:"app-home"}),s("stencil-route",{url:"/profile/:name",component:"app-profile"}))))),s("div",{class:"disclaimer"},"Icons made by"," ",s("a",{href:"https://www.flaticon.com/authors/freepik",title:"Freepik"},"Freepik")," ","from"," ",s("a",{href:"https://www.flaticon.com/",title:"Flaticon"}," ","www.flaticon.com")))}};O.style="header{color:white;height:30px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-box-shadow:0 2px 5px 0 rgba(0, 0, 0, 0.26);box-shadow:0 2px 5px 0 rgba(0, 0, 0, 0.26)}h1{font-size:1rem;font-weight:500;color:#fff;padding:0 12px}.gb-green{background-color:#6b790e}.gb-grey{background-color:#c5bfbf}.gb-dark-grey{background-color:#5a5760}.gb-purple{background-color:#a52059}.disclaimer{position:absolute;bottom:0;right:0;font-size:12px}";const j=class{constructor(s){t(this,s),this.context={},this.renderer=()=>null}connectedCallback(){null!=this.subscribe&&(this.unsubscribe=this.subscribe(this.el,"context"))}disconnectedCallback(){null!=this.unsubscribe&&this.unsubscribe()}render(){return this.renderer(Object.assign({},this.context))}get el(){return e(this)}},T=class{constructor(s){t(this,s),this.group=null,this.match=null,this.componentProps={},this.exact=!1,this.scrollOnNextRender=!1,this.previousMatch=null}computeMatch(t){const s=null!=this.group||null!=this.el.parentElement&&"stencil-route-switch"===this.el.parentElement.tagName.toLowerCase();if(t&&!s)return this.previousMatch=this.match,this.match=n(t.pathname,{path:this.url,exact:this.exact,strict:!0})}async loadCompleted(){let t={};this.history&&this.history.location.hash?t={scrollToId:this.history.location.hash.substr(1)}:this.scrollTopOffset&&(t={scrollTopOffset:this.scrollTopOffset}),"function"==typeof this.componentUpdated?this.componentUpdated(t):this.match&&!r(this.match,this.previousMatch)&&this.routeViewsUpdated&&this.routeViewsUpdated(t)}async componentDidUpdate(){await this.loadCompleted()}async componentDidLoad(){await this.loadCompleted()}render(){if(!this.match||!this.history)return null;const t=Object.assign({},this.componentProps,{history:this.history,match:this.match});return this.routeRender?this.routeRender(Object.assign({},t,{component:this.component})):this.component?s(this.component,Object.assign({},t)):void 0}get el(){return e(this)}static get watchers(){return{location:["computeMatch"]}}};o.injectProps(T,["location","history","historyType","routeViewsUpdated"]),T.style="stencil-route.inactive{display:none}";const H=t=>"STENCIL-ROUTE"===t.tagName,A=class{constructor(s){t(this,s),this.group=((1e17*Math.random()).toString().match(/.{4}/g)||[]).join("-"),this.subscribers=[],this.queue=i(this,"queue")}componentWillLoad(){null!=this.location&&this.regenerateSubscribers(this.location)}async regenerateSubscribers(t){if(null==t)return;let s=-1;if(this.subscribers=Array.prototype.slice.call(this.el.children).filter(H).map((e,i)=>{const o=n(t.pathname,{path:e.url,exact:e.exact,strict:!0});return o&&-1===s&&(s=i),{el:e,match:o}}),-1===s)return;if(this.activeIndex===s)return void(this.subscribers[s].el.match=this.subscribers[s].match);this.activeIndex=s;const e=this.subscribers[this.activeIndex];this.scrollTopOffset&&(e.el.scrollTopOffset=this.scrollTopOffset),e.el.group=this.group,e.el.match=e.match,e.el.componentUpdated=t=>{this.queue.write(()=>{this.subscribers.forEach((t,s)=>{if(t.el.componentUpdated=void 0,s===this.activeIndex)return t.el.style.display="";this.scrollTopOffset&&(t.el.scrollTopOffset=this.scrollTopOffset),t.el.group=this.group,t.el.match=null,t.el.style.display="none"})}),this.routeViewsUpdated&&this.routeViewsUpdated(Object.assign({scrollTopOffset:this.scrollTopOffset},t))}}render(){return s("slot",null)}get el(){return e(this)}static get watchers(){return{location:["regenerateSubscribers"]}}};o.injectProps(A,["location","routeViewsUpdated"]);const S=(t,...s)=>{t||console.warn(...s)},L=()=>{let t,s=[];return{setPrompt:s=>(S(null==t,"A history supports only one prompt at a time"),t=s,()=>{t===s&&(t=null)}),confirmTransitionTo:(s,e,i,o)=>{if(null!=t){const n="function"==typeof t?t(s,e):t;"string"==typeof n?"function"==typeof i?i(n,o):(S(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==n)}else o(!0)},appendListener:t=>{let e=!0;const i=(...s)=>{e&&t(...s)};return s.push(i),()=>{e=!1,s=s.filter(t=>t!==i)}},notifyListeners:(...t)=>{s.forEach(s=>s(...t))}}},M=(t,s="scrollPositions")=>{let e=new Map;const i=(s,i)=>{if(e.set(s,i),y(t,"sessionStorage")){const s=[];e.forEach((t,e)=>{s.push([e,t])}),t.sessionStorage.setItem("scrollPositions",JSON.stringify(s))}};if(y(t,"sessionStorage")){const i=t.sessionStorage.getItem(s);e=i?new Map(JSON.parse(i)):e}return"scrollRestoration"in t.history&&(history.scrollRestoration="manual"),{set:i,get:t=>e.get(t),has:t=>e.has(t),capture:s=>{i(s,[t.scrollX,t.scrollY])}}},C={hashbang:{encodePath:t=>"!"===t.charAt(0)?t:"!/"+f(t),decodePath:t=>"!"===t.charAt(0)?t.substr(1):t},noslash:{encodePath:f,decodePath:a},slash:{encodePath:a,decodePath:a}},U=(t,s)=>{const e=0==t.pathname.indexOf(s)?"/"+t.pathname.slice(s.length):t.pathname;return Object.assign({},t,{pathname:e})},E={browser:(t,s={})=>{let e=!1;const i=t.history,o=t.location,n=t.navigator,r=w(t),f=!P(n),g=M(t),m=null!=s.forceRefresh&&s.forceRefresh,b=null!=s.getUserConfirmation?s.getUserConfirmation:x,y=null!=s.keyLength?s.keyLength:6,v=s.basename?h(a(s.basename)):"",O=()=>{try{return t.history.state||{}}catch(s){return{}}},j=t=>{t=t||{};const{key:s,state:e}=t,{pathname:i,search:n,hash:r}=o;let h=i+n+r;return S(!v||u(h,v),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+h+'" to begin with "'+v+'".'),v&&(h=p(h,v)),c(h,e,s||l(y))},T=L(),H=t=>{g.capture(B.location.key),Object.assign(B,t),B.location.scrollPosition=g.get(B.location.key),B.length=i.length,T.notifyListeners(B.location,B.action)},A=t=>{k(n,t)||U(j(t.state))},C=()=>{U(j(O()))},U=t=>{if(e)e=!1,H();else{const s="POP";T.confirmTransitionTo(t,s,b,e=>{e?H({action:s,location:t}):E(t)})}},E=t=>{let s=F.indexOf(B.location.key),i=F.indexOf(t.key);-1===s&&(s=0),-1===i&&(i=0);const o=s-i;o&&(e=!0,N(o))},V=j(O());let F=[V.key],R=0,W=!1;const I=t=>v+d(t),N=t=>{i.go(t)},_=s=>{R+=s,1===R?(t.addEventListener("popstate",A),f&&t.addEventListener("hashchange",C)):0===R&&(t.removeEventListener("popstate",A),f&&t.removeEventListener("hashchange",C))},B={length:i.length,action:"POP",location:V,createHref:I,push:(t,s)=>{S(!("object"==typeof t&&void 0!==t.state&&void 0!==s),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");const e=c(t,s,l(y),B.location);T.confirmTransitionTo(e,"PUSH",b,t=>{if(!t)return;const s=I(e),{key:n,state:h}=e;if(r)if(i.pushState({key:n,state:h},"",s),m)o.href=s;else{const t=F.indexOf(B.location.key),s=F.slice(0,-1===t?0:t+1);s.push(e.key),F=s,H({action:"PUSH",location:e})}else S(void 0===h,"Browser history cannot push state in browsers that do not support HTML5 history"),o.href=s})},replace:(t,s)=>{S(!("object"==typeof t&&void 0!==t.state&&void 0!==s),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");const e=c(t,s,l(y),B.location);T.confirmTransitionTo(e,"REPLACE",b,t=>{if(!t)return;const s=I(e),{key:n,state:h}=e;if(r)if(i.replaceState({key:n,state:h},"",s),m)o.replace(s);else{const t=F.indexOf(B.location.key);-1!==t&&(F[t]=e.key),H({action:"REPLACE",location:e})}else S(void 0===h,"Browser history cannot replace state in browsers that do not support HTML5 history"),o.replace(s)})},go:N,goBack:()=>N(-1),goForward:()=>N(1),block:(t="")=>{const s=T.setPrompt(t);return W||(_(1),W=!0),()=>(W&&(W=!1,_(-1)),s())},listen:t=>{const s=T.appendListener(t);return _(1),()=>{_(-1),s()}},win:t};return B},hash:(t,s={})=>{let e=!1,i=null,o=0,n=!1;const r=t.location,f=t.history,m=v(t.navigator),b=null!=s.keyLength?s.keyLength:6,{getUserConfirmation:y=x,hashType:w="slash"}=s,P=s.basename?h(a(s.basename)):"",{encodePath:k,decodePath:O}=C[w],j=()=>{const t=r.href,s=t.indexOf("#");return-1===s?"":t.substring(s+1)},T=t=>{const s=r.href.indexOf("#");r.replace(r.href.slice(0,s>=0?s:0)+"#"+t)},H=()=>{let t=O(j());return S(!P||u(t,P),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+P+'".'),P&&(t=p(t,P)),c(t,void 0,l(b))},A=L(),M=t=>{Object.assign(B,t),B.length=f.length,A.notifyListeners(B.location,B.action)},U=()=>{const t=j(),s=k(t);if(t!==s)T(s);else{const t=H(),s=B.location;if(!e&&g(s,t))return;if(i===d(t))return;i=null,E(t)}},E=t=>{if(e)e=!1,M();else{const s="POP";A.confirmTransitionTo(t,s,y,e=>{e?M({action:s,location:t}):V(t)})}},V=t=>{let s=I.lastIndexOf(d(B.location)),i=I.lastIndexOf(d(t));-1===s&&(s=0),-1===i&&(i=0);const o=s-i;o&&(e=!0,N(o))},F=j(),R=k(F);F!==R&&T(R);const W=H();let I=[d(W)];const N=t=>{S(m,"Hash history go(n) causes a full page reload in this browser"),f.go(t)},_=(t,s)=>{o+=s,1===o?t.addEventListener("hashchange",U):0===o&&t.removeEventListener("hashchange",U)},B={length:f.length,action:"POP",location:W,createHref:t=>"#"+k(P+d(t)),push:(t,s)=>{S(void 0===s,"Hash history cannot push state; it is ignored");const e=c(t,void 0,l(b),B.location);A.confirmTransitionTo(e,"PUSH",y,t=>{if(!t)return;const s=d(e),o=k(P+s);if(j()!==o){i=s,(t=>{r.hash=t})(o);const t=I.lastIndexOf(d(B.location)),n=I.slice(0,-1===t?0:t+1);n.push(s),I=n,M({action:"PUSH",location:e})}else S(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),M()})},replace:(t,s)=>{S(void 0===s,"Hash history cannot replace state; it is ignored");const e=c(t,void 0,l(b),B.location);A.confirmTransitionTo(e,"REPLACE",y,t=>{if(!t)return;const s=d(e),o=k(P+s);j()!==o&&(i=s,T(o));const n=I.indexOf(d(B.location));-1!==n&&(I[n]=s),M({action:"REPLACE",location:e})})},go:N,goBack:()=>N(-1),goForward:()=>N(1),block:(s="")=>{const e=A.setPrompt(s);return n||(_(t,1),n=!0),()=>(n&&(n=!1,_(t,-1)),e())},listen:s=>{const e=A.appendListener(s);return _(t,1),()=>{_(t,-1),e()}},win:t};return B}},V=class{constructor(s){t(this,s),this.root="/",this.historyType="browser",this.titleSuffix="",this.routeViewsUpdated=(t={})=>{if(this.history&&t.scrollToId&&"browser"===this.historyType){const s=this.history.win.document.getElementById(t.scrollToId);if(s)return s.scrollIntoView()}this.scrollTo(t.scrollTopOffset||this.scrollTopOffset)},this.isServer=i(this,"isServer"),this.queue=i(this,"queue")}componentWillLoad(){this.history=E[this.historyType](this.el.ownerDocument.defaultView),this.history.listen(t=>{t=U(t,this.root),this.location=t}),this.location=U(this.history.location,this.root)}scrollTo(t){const s=this.history;if(null!=t&&!this.isServer&&s)return"POP"===s.action&&Array.isArray(s.location.scrollPosition)?this.queue.write(()=>{s&&s.location&&Array.isArray(s.location.scrollPosition)&&s.win.scrollTo(s.location.scrollPosition[0],s.location.scrollPosition[1])}):this.queue.write(()=>{s.win.scrollTo(0,t)})}render(){if(this.location&&this.history)return s(o.Provider,{state:{historyType:this.historyType,location:this.location,titleSuffix:this.titleSuffix,root:this.root,history:this.history,routeViewsUpdated:this.routeViewsUpdated}},s("slot",null))}get el(){return e(this)}};export{O as app_root,j as context_consumer,T as stencil_route,A as stencil_route_switch,V as stencil_router}